# The Cost of JavaScript In 2018 By [Addy Osmani](https://medium.com/@addyosmani/the-cost-of-javascript-in-2018-7d8950fbb5d4)

## Byte-by-byte, JavaScript is still the most expensive resource we send to mobile phones, because it can delay interactivity in large ways

## Some strategies can be used to deliver JavaScript efficiently while still giving users a valuable experience

### 1. To stay fast, only load JavaScript needed for the current page

### Prioritize what a user will need and lazy-load the rest with code-splitting

### 2. Embrace performance budgets and learn to live within them

### For mobile, aim for a JS budget of < 170KB minified/compressed. Budgets are critical to success, however, they can't magically fix perf in isolation. Team culture, structure and enforcement matter.

### 3. Learn how to audit and trim your JavaScript bundles.

### 4. Every interaction is the start of a new "Time-to-Interactive", consider optimizations in this context

### Transmission size is critical for low-end mobile networks and JavaScript parse time for CPU-bound devices

### 5. If client-side JavaScript isn't benefiting the user-experience, ask yourself if it's really necessary

### Maybe server-side-rendered HTML would actually be faster

## Loading is a journey, there are 3 key moments: Is it happening? Is it useful? Is it usable?

### **Is it happening** is the moment you're able to deliver some content to the screen. (has the navigation started? has the server started responding?)

### **Is it useful** is the moment when you've painted text or content that allows the user to derive value from the experience and engage with it

### **Is it usable** is the moment when a user can start meaningfully interacting with the experience and have something happen

### Loading too much JavaScript into the main thread is the issue. Pulling JS into a Web Worker or caching via a Service Worker doesn't have the same negative Time-to-Interactive impact. Too much(main thread) JavaScript can delay interactivity for visible elements

### If you spend a long time parsing and compiling script in a JavaScript engine, that delays how soon a user can interact with your experience

### JavaScript is that all bytes are not equal. A 200KB script and a 200KB image have very different costs

![Insights into the 2.3 Billion Android Smartphones](https://cdn-images-1.medium.com/max/1000/1*l25BNM-2lJrwFXDJkcs6vw.png)

### It's really important to know your audience

### If you want JavaScript to be fast, pay attention to download times for low end networks. The improvements you can make there are: ship less code, minify your source, take advantage of compression

### Audit JS regularly

### Tools like [Webpack Bundle Analyzer](https://www.npmjs.com/package/webpack-bundle-analyzer), [Source Map Explorer](https://www.npmjs.com/package/source-map-explorer), [Bundle Buddy](https://github.com/samccone/bundle-buddy) allow you to audit your bundles for opportunities to trim them down

### Code coverage is a feature in DevTools taht allows you to discover unused JavaScript(and CSS) in your pages

### PRPL(Push, Render, Precache and Lazy-Load) is a pattern for aggressively splitting code for every single route, then taking advantage of a service worker to pre-cache the JavaScript and logic needed for future routes, and lazy load it as needed

### Metrics for perf budgets can include:

### * ***Milestone timings*** - timings based on the user-experience loading a page

### * ***Quality-based metrics*** - based on raw values(e.g. weight of JavaScript, number of HTTP requests)

### * ***Rule-based metrics*** - scores generated by tools such as Lighthouse or WebPageTest
