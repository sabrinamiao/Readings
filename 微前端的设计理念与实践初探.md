# 微前端的设计理念与实践初探

## 微服务与微前端原理和软件工程，面向对象设计中的原理同样相通，都是遵循单一职责(Single Responsibility)、关注分离(Separation of Concerns)、模块化(Modularity)与分而治之(Divide & Conquer)等基本的原则

![图解](https://pic4.zhimg.com/80/v2-582177341de2baae119aebd7d3657e2d_hd.jpg)

## 微前端的落地需要考虑到产品研发与发布的完整生命周期

### 应用组合：

#### * 组合实际，在构建时组合，还是在运行时组合

#### * 应用路由，如何根据 URL 加载/导航到不同的页面，如何根据子应用界面的变化切换 URL

#### * 应用加载，确定加载应用的版本，依赖于框架的加载机制，还是采用 AMD 或者 SystemJS 异步加载

### 应用隔离：

#### * 应用容错，某个应用的崩溃不应影响到其他应用或容器应用

#### * 样式隔离，避免 CSS 相互污染

#### * DOM 隔离，避免子应用操作非自身作用域内的结点

### 应用协调与治理：

#### * 统一配置与切换，主题，利用 CSS Variables 等方式动态换肤

#### * 应用的生命周期，规范化子应用的生命周期，并且在不同生命周期中执行不同的操作

#### * 数据共享，子应用间数据共享

#### * 服务共享，跨应用数据共享与服务调用

#### * 组件共享，可能将某个纯界面组件或业务组件以插件(Plugin)或者部件(Widget)的方式共享出去；提供某个计算能力

### 开发环境：

#### * 跨技术栈支持

#### * 统一的构建流程与规范

#### * 打桩、埋点与Hijack

## 微前端化本身是为了保证系统的持续集成与快速迭代，对于各个子模块与系统本身的可用性与稳定性势必会带来挑战，要求我们在设计微前端解决方案时，考虑持续构建的时机与对应的测试方案。 除了标准的单元测试、集成测试、端到端测试之外，我们还需要保证模块的依赖一致性与功能模块的可生成性

## 微服务是一个简单而泛化的概念，与微服务相对的是单体架构的巨石型(Monolithic)应用，典型的即是将所有功能都部署在一个Web容器中运行的系统。微服务往往要求组织具备快速的环境提供(Rapid Provisioning)与云开发、基本的监控(Basic Monitoring)、快速的应用发布(Rapid Application Deployment)、DevOps等能力

![微服务应用与巨石型应用的区别](https://pic1.zhimg.com/80/v2-454c81aa6706cd9d315c881259f47b2d_hd.jpg)

### 微服务应用往往由多个粒度较小，版本独立，有明确边界并可扩展的服务构成，各个服务之间通过定义好的标准协议互相通信

![微服务的挑战与关注点](https://pic3.zhimg.com/80/v2-3f6dcf2bf23e181d2e792bda58bdf0d2_hd.jpg)
